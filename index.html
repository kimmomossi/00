ㆍ<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>체질판별</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
        }
        table {
            width: 80%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            border: 1px solid black;
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
        .highlight {
            background-color: yellow;
            font-weight: bold;
        }
        .category {
            background-color: #ffcc00;
            font-weight: bold;
        }
    </style>
    <script>
        function calculateResults() {
            let birthDateInput = document.getElementById("birthDate").value;
            if (!/^\d{8}$/.test(birthDateInput)) {
                alert("생년월일(양력)을 YYYYMMDD 형식으로 입력하세요.");
                return;
            }

            let birthYear = parseInt(birthDateInput.substring(0, 4));
            let birthMonth = parseInt(birthDateInput.substring(4, 6));
            let birthDay = parseInt(birthDateInput.substring(6, 8));

            let birthDate = new Date(birthYear, birthMonth - 1, birthDay);
            let conceptionDate = new Date(birthDate);
            conceptionDate.setDate(conceptionDate.getDate() - 266); // 266일 빼기

            let conceptionYear = conceptionDate.getFullYear();

            let birthHeavenlyStem = getHeavenlyStem(birthYear);
            let conceptionHeavenlyStem = getHeavenlyStem(conceptionYear);

            let birthLuck = getLuck(birthDate);
            let conceptionLuck = getLuck(conceptionDate);

            let birthElement = getFiveElements(birthHeavenlyStem, birthLuck);
            let conceptionElement = getFiveElements(conceptionHeavenlyStem, conceptionLuck);

            let birthImbalance = getImbalance(birthHeavenlyStem);
            let conceptionImbalance = getImbalance(conceptionHeavenlyStem);

            let birthConstitution = getConstitution(birthElement, birthImbalance);
            let conceptionConstitution = getConstitution(conceptionElement, conceptionImbalance);

            let birthDayStemBranch = getDayStemBranch(birthYear, birthMonth, birthDay);
            let conceptionDayStemBranch = getDayStemBranch(conceptionYear, conceptionDate.getMonth() + 1, conceptionDate.getDate());

            // 결과를 표에 업데이트
            document.getElementById("birthDateCell").innerText = `${birthYear}년 ${birthMonth}월 ${birthDay}일`;
            document.getElementById("conceptionDateCell").innerText = `${conceptionYear}년 ${conceptionDate.getMonth() + 1}월 ${conceptionDate.getDate()}일`;
            document.getElementById("birthHeavenlyStemCell").innerText = birthHeavenlyStem;
            document.getElementById("conceptionHeavenlyStemCell").innerText = conceptionHeavenlyStem;
            document.getElementById("birthDayStemBranchCell").innerText = birthDayStemBranch;
            document.getElementById("conceptionDayStemBranchCell").innerText = conceptionDayStemBranch;
            document.getElementById("birthLuckCell").innerText = birthLuck + "운";
            document.getElementById("conceptionLuckCell").innerText = conceptionLuck + "운";
            document.getElementById("birthElementCell").innerText = birthElement;
            document.getElementById("conceptionElementCell").innerText = conceptionElement;
            document.getElementById("birthImbalanceCell").innerText = birthImbalance;
            document.getElementById("conceptionImbalanceCell").innerText = conceptionImbalance;
            document.getElementById("birthConstitutionCell").innerText = birthConstitution;
            document.getElementById("conceptionConstitutionCell").innerText = conceptionConstitution;
        }

        function getHeavenlyStem(year) {
            const heavenlyStems = ["갑", "을", "병", "정", "무", "기", "경", "신", "임", "계"];
            return heavenlyStems[(year - 4) % 10];
        }

        function getDayStemBranch(year, month, day) {
            const heavenlyStems = ["갑", "을", "병", "정", "무", "기", "경", "신", "임", "계"];
            const earthlyBranches = ["자", "축", "인", "묘", "진", "사", "오", "미", "신", "유", "술", "해"];
            
            let baseDate = new Date(1900, 0, 1); // 1900년 1월 1일 기준
            let inputDate = new Date(year, month - 1, day);
            let dayDifference = Math.floor((inputDate - baseDate) / (1000 * 60 * 60 * 24));

            let dayStem = heavenlyStems[(dayDifference + 6) % 10];
            let dayBranch = earthlyBranches[(dayDifference + 4) % 12];

            return dayStem + dayBranch;
        }
    </script>
</head>
<body>
    <h2>체질판별</h2>
    <label for="birthDate">생년월일(양력) 입력 (YYYYMMDD 형식):</label>
    <input type="text" id="birthDate" maxlength="8" placeholder="예: 20250101">
    <button onclick="calculateResults()">결과 확인</button>

    <h3>결과:</h3>
    <table>
        <tr>
            <th></th>
            <th>출생일 - 후천체질</th>
            <th>입태일 - 선천체질</th>
        </tr>
        <tr>
            <td class="highlight">날짜</td>
            <td id="birthDateCell"></td>
            <td id="conceptionDateCell"></td>
        </tr>
        <tr>
            <td>천간</td>
            <td id="birthHeavenlyStemCell"></td>
            <td id="conceptionHeavenlyStemCell"></td>
        </tr>
        <tr>
            <td>일주</td>
            <td id="birthDayStemBranchCell"></td>
            <td id="conceptionDayStemBranchCell"></td>
        </tr>
        <tr>
            <td>운</td>
            <td id="birthLuckCell"></td>
            <td id="conceptionLuckCell"></td>
        </tr>
        <tr>
            <td>오행</td>
            <td id="birthElementCell"></td>
            <td id="conceptionElementCell"></td>
        </tr>
        <tr>
            <td>태과/불급</td>
            <td id="birthImbalanceCell"></td>
            <td id="conceptionImbalanceCell"></td>
        </tr>
        <tr>
            <td class="category">체질</td>
            <td id="birthConstitutionCell"></td>
            <td id="conceptionConstitutionCell"></td>
        </tr>
    </table>
</body>
</html>
